<!DOCTYPE html>
<html lang="en" data-ng-app="feedbackApp">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Feedback Page</title>

    <!-- Bootstrap -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css">
    <!-- <link rel="stylesheet" href="../compass-feedback/extras/bootstrap.4.0.min.css"> -->

	<link rel="stylesheet" href="./stylesheets/style.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body data-ng-controller="feedbackController">
    <div id="container" class="container">
    	<div class="row locationName-row">
    		<!--// name of the club-->
    		<div class="col-xs-12 locationName-col">
    			<h4 id="locationName" class="whiteText text-xs-center">{{overView.locationName}}</h4>
    		</div>
    	</div>

    	<div class="row ">
    		<!-- Div to show highlights -->

    		<div class="col-xs-5 card text-xs-center highlight leftHighlight">
    			<p class="card-text whiteText">Today's Score</p>
    			<div class="card-text">
    				<h3 class="card-title darkGreenTextColor">{{getTodaysScore(allData)}}<span class="card-text whiteText pull-xs-right pull-sm-right pull-md-right pull-lg-right perdiff" data-ng-hide="getTotalTodaysReviews()==0">+2.3%</span></h3>
    			</div>
				<p class="card-text whiteText">{{getTotalTodaysReviewsText()}}</p>
			</div>

			<div class="col-xs-4 card text-xs-center highlight rightHighlight">
    			<p class="card-text whiteText">All-Time</p>
				<h3 class="card-title whiteText">{{(overView.totalRating / overView.totalReviews) | number:1}}</h3>
				<p class="card-text whiteText">from {{overView.totalReviews}} reviews</p>
			</div>

    	</div>    

    	<div class="row feedBack">
            <div class="col-xs-5 col-sm-5 col-md-5 col-lg-5"><hr class=""></div>
            <div class="col-xs-3 col-sm-3 col-md-2 col-lg-2 whiteText text-xs-center">Feedback</div>
            <div class="col-xs-4 col-sm-4 col-md-5 col-lg-5"><hr class=""></div>
    	</div>

        <div data-ng-repeat="feedbacks in allData | orderBy:'-' | limitTo: daysTobeViewed as results" data-ng-if="feedbacks.$id != OverViewKey">

            <div class="row dateButtons">
                <div class="col-xs-6"><button type="button" class="btn pullLeft whiteText feedbackAppButton">{{getDateObject(feedbacks.$id) | date:"MMMM dd"}}</button></div>
            </div>

            <div class="row npComplainCard" data-ng-repeat="feedback in feedbacks" data-ng-init="">
                <div class="card col-xs-12">
                    <div class="card-header">
                        <p class="customer pull-xs-left pull-sm-left pull-md-left pull-lg-left">
                            <span class="customerName">{{feedback.user_first_name}} {{feedback.user_last_name}}</span>
                            <span class="visitDate text-danger">Visited: {{getVisitedDateObject(feedback.visit_date_mil_time_in_pst) | date : 'EEEE, MMMM d'}}</span>
                        </p>
                        <p class="visitRating pull-xs-right pull-sm-right pull-md-right pull-lg-right bg-danger">
                            <span class="star text-xs-center text-sm-center text-md-center text-lg-center vertical">{{feedback.rating}}<img class="imgStar" alt="star" src="images/Star.svg"></span>
                            <span class="service text-xs-center text-sm-center text-md-center text-lg-center">{{getReasons(feedback.reason_1,feedback.reason_2,feedback.reason_3,feedback.reason_4,feedback.reason_5,feedback.reason_6)}}</span>
                        </p>
                    </div>
                    <div class="card-block">
                        <blockquote class="card-blockquote" data-ng-hide="isThereNoComment(feedback.comment.length)">
                            <p>{{feedback.comment}}</p>
                        </blockquote>
                        <p class="ticketDuration text-xs-center" data-ng-hide="true">Open for 5h</p>
                        <hr class="divider" data-ng-hide="isThereNoComment(feedback.comment.length)">

                        <button type="button" class="btn btn-secondary pullLeft text-muted" ngclipboard data-ng-click="callText = getPhoneText(feedback.user_phone, callText)" data-clipboard-text={{getPhoneText(feedback.user_phone,callText)}} uib-tooltip="Copied to your clipboard!" tooltip-trigger="click outsideClick" tooltip-placement="left" tooltip-animation="true">{{callText}}</button>

                        <button type="button" class="btn btn-secondary pullRight text-muted" ngclipboard data-ng-click="emailText = getEmailText(feedback.user_email,emailText)" data-clipboard-text={{getEmailText(feedback.user_email,emailText)}} uib-tooltip="Copied to your clipboard!" tooltip-trigger="click outsideClick" tooltip-placement="right" tooltip-animation="true">{{emailText}}</button>
                    </div>
                </div>

            </div>
            
        </div>


        <div class="row loadmoreButton">
            <div class="col-xs-12 text-xs-center"><button type="button" class="btn whiteText feedbackAppButton" data-ng-click="getMoreData()" data-ng-hide="daysTobeViewed==allData.length - 1">Show Previous Day</button></div>
        </div>

    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <!-- <script src="../compass-feedback/extras/jquery.2.1.min.js"></script> -->
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <!-- <script src="../compass-feedback/extras/bootstrap.4.0.min.js"></script> -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.2/js/tether.min.js"></script> -->
    <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/js/bootstrap.min.js"></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-route.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-resource.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-cookies.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-sanitize.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/1.3.2/ui-bootstrap-tpls.min.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/1.3.2/ui-bootstrap.min.js"></script> -->
    <script src="https://cdn.firebase.com/js/client/2.2.4/firebase.js"></script>
    <script src="https://cdn.firebase.com/libs/angularfire/1.1.3/angularfire.min.js"></script>
    <script src="https://cdn.rawgit.com/zenorocha/clipboard.js/master/dist/clipboard.min.js"></script>


    <!-- 3rd Party Modules-->
    <script type="text/javascript" src="js/lib/ngclipboard.min.js"></script>

    <!-- Application -->
    <!-- <script src="./js/app.js"></script> -->

    <!-- Controllers-->
    <script type="text/javascript" src="js/controllers/feedbackController.js"></script>

    <script type="text/javascript">
        /*jquery(function () {
            alert("hi");
            jquery("[data-toggle='tooltip']").tooltip();
        })*/

        /*$.noConflict();

        jQuery(function(){
            jQuery('[data-toggle="tooltip"]').tooltip();
        });*/

        /*$(document).on('change','button',function(){
            $('[data-toggle="tooltip"]').tooltip();
        });*/

    </script>

  </body>
</html>